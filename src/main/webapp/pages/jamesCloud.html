
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>James Cloud</title>
		<script src="js/jquery-1.2.6.min.js" type="text/javascript" charset="utf-8"></script> 
		<script src="js/jquery.tagcloud.js" type="text/javascript" charset="utf-8"></script> 
	</head>
    <body>
		<script>
		$(document).ready(function() { 

		}); 
		
		setInterval(function() {
		
			$.ajax(
			{
				type: "GET",
				dataType: "json", 
				// jquery with dataType: "json" seems to parse the text, so we could also handle text and parse afterwards: 
				// dataType: "text",
				// var jsonData = JSON.parse(jsonText);
				url: "http://labs.zanox.com:8080/james/rest/getAnswerSummary?id=1",
				success: function (jsonArrayObject) 
				{
					// jsonArrayObject looks like this: 
					// {"tags": [ {"answer":"Twitter", "count":"4"},{"answer":"Facebook", "count":"1"},{"answer":"Zanox Marketplace", "count":"2"} ]}
					
					var tagCloud = '';
					
					// create tags for cloud -> elements look like this: <tag rel="2">twitter</tag> 
					for (var i=0; i<jsonArrayObject.tags.length; i++) {
						tagCloud = tagCloud + '<tag rel="' + jsonArrayObject.tags[i].count + '">' + jsonArrayObject.tags[i].answer + '</tag> '
					}
				
					// we can throw this our later!
					var currentdate = new Date(); 
					var datetime = "Last Sync: " + currentdate.getDate() + "/"
					+ (currentdate.getMonth()+1)  + "/" 
					+ currentdate.getFullYear() + " @ "  
					+ currentdate.getHours() + ":"  
					+ currentdate.getMinutes() + ":" 
					+ currentdate.getSeconds();
						
					tagCloud = tagCloud + '<tag rel="8">' + currentdate + '</tag>'
					
					$("#tagcloud").html(tagCloud);
					
					$("#tagcloud tag").tagcloud({ 
					 size: { 
					   start: 30, 
					   end: 100, 
					   unit: 'px' 
					 }, 
					 color: { 
					   start: "#FS2", 
					   end: "#FS2" 
					 } 
					});
				}
			});
							
		}, 5000)

		</script>
		
		
		<div id="tagcloud" style="width:400px;margin:0 auto;height:200px"> 
		 </div> 
	
    </body>
</html>
